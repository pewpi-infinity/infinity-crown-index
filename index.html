<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ğŸ‘‘ Infinity Crown Index</title>
<style>
:root{--bg:#0b0f14;--panel:#0f1620;--line:rgba(255,255,255,.1);--text:#e8eef7;--muted:#a9b7c8}
*{box-sizing:border-box}
body{margin:0;background:radial-gradient(900px 600px at 20% -10%,#18243a,transparent 40%),var(--bg);
     color:var(--text);font-family:system-ui}
header{position:sticky;top:0;background:rgba(11,15,20,.92);backdrop-filter:blur(8px);
       border-bottom:1px solid var(--line);z-index:10}
.wrap{max-width:1200px;margin:auto;padding:14px}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.brand{font-weight:800;letter-spacing:.4px}
.search{flex:1;min-width:240px;border:1px solid var(--line);border-radius:999px;padding:8px 12px;display:flex;gap:8px}
.search input{width:100%;background:transparent;border:0;outline:0;color:var(--text)}
.grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px;margin-top:14px}
.card{grid-column:span 6;border:1px solid var(--line);border-radius:16px;overflow:hidden;background:rgba(255,255,255,.03)}
@media(max-width:900px){.card{grid-column:span 12}}
.hd{padding:12px;border-bottom:1px solid var(--line)}
.repo{font-weight:700}
.url{font-size:12px;color:var(--muted);word-break:break-all}
.bar{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
.e{min-width:38px;height:34px;border:1px solid var(--line);border-radius:12px;
   display:inline-flex;align-items:center;justify-content:center;cursor:pointer;font-size:18px}
.e:hover{transform:translateY(-1px)}
.body{padding:12px}
.steps{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px}
.step{border:1px solid var(--line);border-radius:999px;padding:6px 10px;font-size:12px;cursor:pointer}
.step.active{background:rgba(255,255,255,.1)}
.panel{border:1px solid var(--line);border-radius:14px;padding:10px;background:rgba(0,0,0,.25)}
.links{display:flex;gap:8px;flex-wrap:wrap}
.lnk{border:1px solid var(--line);border-radius:12px;padding:7px 10px;font-size:12px}
footer{border-top:1px solid var(--line);margin-top:24px}
.tiny{font-size:11px;color:var(--muted)}
</style>
    <link rel="stylesheet" href="css/grid-fix.css">
</head>
<body>

<header>
  <div class="wrap row">
    <div class="brand">ğŸ‘‘ Infinity Crown Index</div>
    <div class="search"><span>ğŸ•¹ï¸</span><input id="q" placeholder="Search crownsâ€¦"></div>
    <div class="tiny" id="count"></div>
  </div>
</header>

<main class="wrap">
  <div class="grid" id="grid"></div>
</main>

<footer class="wrap tiny">
  Card-local interaction engine â€¢ Emoji = mode â€¢ No outbound redirects
</footer>

<script>
const ladder=["ğŸŸ¡","ğŸ‘‘","ğŸ¤“","ğŸ¦¾","âš™ï¸","ğŸ’°","ğŸ’²"];
const emojis=["âš™ï¸","ğŸ¦¾","ğŸ’","ğŸ„","ğŸ‘‘","ğŸŸ¡","ğŸ¤“","ğŸ’°","ğŸ’²","ğŸ§±"];
const cardState={activeMode:{}};
const $=id=>document.getElementById(id);

function inferTools(repo){
  const r=repo.toLowerCase();
  const t=[];
  if(r.includes("spark"))t.push("ğŸ¨ Page Builder","ğŸ§± Component Editor");
  if(r.includes("infinity"))t.push("ğŸ§  AI Panel","ğŸŸ¡ Token Engine");
  if(r.includes("market"))t.push("ğŸ’° Pricing Engine","ğŸ“ˆ Trends");
  if(r.includes("data"))t.push("ğŸ“Š Charts","ğŸ§® Analyzer");
  return t.length?t:["ğŸ” Inspector","ğŸ§± Repo Viewer"];
}

function handleEmoji(repo,emoji){
  cardState.activeMode[repo]=emoji;
  render();
}

function renderPanel(repo,url){
  const m=cardState.activeMode[repo];
  if(!m)return "";
  if(m==="âš™ï¸"){
    return `<div class="panel"><strong>âš™ï¸ Tools</strong><div class="links">${
      inferTools(repo).map(t=>`<div class="lnk">${t}</div>`).join("")
    }</div></div>`;
  }
  if(m==="ğŸ¦¾")return `<div class="panel">ğŸ¦¾ Automation queued (local)</div>`;
  if(m==="ğŸ’")return `<div class="panel">ğŸ’ Facet saved locally</div>`;
  if(m==="ğŸ„")return `<div class="panel">ğŸ„ Expanded context view</div>`;
  if(m==="ğŸ‘‘")return `<div class="panel">ğŸ‘‘ Royal mode active</div>`;
  if(m==="ğŸŸ¡")return `<div class="panel">ğŸŸ¡ Token intent set (local)</div>`;
  if(m==="ğŸ¤“")return `<div class="panel">ğŸ¤“ Research workspace (local)</div>`;
  if(m==="ğŸ’°")return `<div class="panel">ğŸ’° Value analysis panel</div>`;
  if(m==="ğŸ’²")return `<div class="panel">ğŸ’² Asset builder panel</div>`;
  return "";
}

function card(item){
  const mode=cardState.activeMode[item.repo];
  return `<div class="card">
    <div class="hd">
      <div class="repo">ğŸ‘‘ ${item.repo}</div>
      <div class="url">${item.url}</div>
      <div class="bar">${
        emojis.map(e=>`<div class="e" onclick="handleEmoji('${item.repo}','${e}')">${e}</div>`).join("")
      }</div>
    </div>
    <div class="body">
      ${renderPanel(item.repo,item.url)}
    </div>
  </div>`;
}

async function load(){
  const data=await (await fetch("data/crown_sites.json",{cache:"no-store"})).json();
  window.data=data;
  $("count").textContent="ğŸ‘‘ "+data.length;
  render();
}

function render(){
  const q=($("q").value||"").toLowerCase();
  $("grid").innerHTML=window.data
    .filter(x=>!q||x.repo.toLowerCase().includes(q)||x.url.toLowerCase().includes(q))
    .map(card).join("");
}

$("q").oninput=render;
load();
</script>
<!-- Emoji Control Panels -->
<div style="position:fixed;bottom:12px;right:12px;">
<a href="panels/emoji_panels.html" target="_blank" style="font-size:24px;">ğŸ›ï¸</a>
</div>
</body>
</html>
