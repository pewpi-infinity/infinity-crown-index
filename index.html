<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ğŸ‘‘ Infinity Crown Index</title>
<style>
:root{--bg:#0b0f14;--panel:#0f1620;--line:rgba(255,255,255,.08);--text:#e8eef7;--muted:#a9b7c8}
*{box-sizing:border-box}
body{margin:0;background:radial-gradient(900px 600px at 20% -10%,#18243a,transparent 40%),var(--bg);
     color:var(--text);font-family:system-ui}
header{position:sticky;top:0;background:rgba(11,15,20,.9);backdrop-filter:blur(8px);
       border-bottom:1px solid var(--line);z-index:10}
.wrap{max-width:1200px;margin:auto;padding:14px}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.brand{font-weight:800;letter-spacing:.4px}
.search{flex:1;min-width:240px;border:1px solid var(--line);border-radius:999px;padding:8px 12px;display:flex;gap:8px}
.search input{width:100%;background:transparent;border:0;outline:0;color:var(--text)}
.grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px;margin-top:14px}
.card{grid-column:span 6;border:1px solid var(--line);border-radius:16px;overflow:hidden;background:rgba(255,255,255,.03)}
@media(max-width:900px){.card{grid-column:span 12}}
.hd{padding:12px;border-bottom:1px solid var(--line)}
.repo{font-weight:700}
.url{font-size:12px;color:var(--muted);word-break:break-all}
.bar{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
.e{min-width:38px;height:34px;border:1px solid var(--line);border-radius:12px;
   display:inline-flex;align-items:center;justify-content:center;cursor:pointer}
.e:hover{transform:translateY(-1px)}
.body{padding:12px}
.steps{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:8px}
.step{border:1px solid var(--line);border-radius:999px;padding:6px 10px;font-size:12px;cursor:pointer}
.step.active{background:rgba(255,255,255,.08)}
.panel{border:1px solid var(--line);border-radius:14px;padding:10px;background:rgba(0,0,0,.25)}
.links{display:flex;gap:8px;flex-wrap:wrap}
.lnk{border:1px solid var(--line);border-radius:12px;padding:7px 10px;text-decoration:none;color:var(--text);font-size:12px}
.tiny{font-size:11px;color:var(--muted)}
footer{border-top:1px solid var(--line);margin-top:24px}
</style>
</head>
<body>
<header>
  <div class="wrap row">
    <div class="brand">ğŸ‘‘ Infinity Crown Index</div>
    <div class="search"><span>ğŸ•¹ï¸</span><input id="q" placeholder="Search crownsâ€¦"></div>
    <div class="tiny" id="count"></div>
  </div>
</header>

<main class="wrap">
  <div class="grid" id="grid"></div>
</main>

<footer class="wrap tiny">
  Ladder: ğŸŸ¡â†’ğŸ‘‘â†’ğŸ¤“â†’ğŸ¦¾â†’âš™ï¸â†’ğŸ’°â†’ğŸ’² â€¢ Emoji-only â€¢ Local vault for ğŸ’ & ğŸ§²
</footer>

<script>
const ladder=["ğŸŸ¡","ğŸ‘‘","ğŸ¤“","ğŸ¦¾","âš™ï¸","ğŸ’°","ğŸ’²"];
const emojis=["âš™ï¸","ğŸ•¹ï¸","ğŸ§²","ğŸ¦¾","ğŸ’","ğŸ‘‘","ğŸ”","â­","ğŸŸ¡","ğŸ„","ğŸ¤‘","ğŸ”","ğŸ§±","âš¡","ğŸ’°","ğŸ¤“","âšª","â˜„ï¸","ğŸŒ","ğŸ’²"];
const vault=JSON.parse(localStorage.getItem("vault")||"[]");
const pulled=JSON.parse(localStorage.getItem("pulled")||"[]");
const $=id=>document.getElementById(id);

function save(){localStorage.setItem("vault",JSON.stringify(vault.slice(0,500)));
               localStorage.setItem("pulled",JSON.stringify(pulled.slice(0,500)));}

function search(q){return `https://duckduckgo.com/?q=${encodeURIComponent(q)}`;}

function panel(step,item){
  const topic=($("q").value||item.repo);
  if(step==="ğŸŸ¡")return `<div class=panel><div class=tiny>Token intent set (local)</div></div>`;
  if(step==="ğŸ‘‘")return `<div class=panel><a class=lnk href="${item.url}" target=_blank>ğŸ‘‘ open</a></div>`;
  if(step==="ğŸ¤“")return `<div class=panel>
    <div class=links>
      <a class=lnk href="${search(topic+' site:'+new URL(item.url).host)}" target=_blank>ğŸ”</a>
      <a class=lnk href="${search(topic+' github '+item.repo)}" target=_blank>ğŸ”</a>
      <a class=lnk href="${search(topic+' trends')}" target=_blank>â­</a>
      <a class=lnk href="${search(topic+' nightly news movies entertainment')}" target=_blank>â˜„ï¸</a>
    </div></div>`;
  if(step==="ğŸ¦¾")return `<div class=panel>
    <div class=links>
      <button class=lnk onclick='pull("${item.repo}","${item.url}")'>ğŸ§²</button>
      <button class=lnk onclick='facet("${item.repo}","${item.url}")'>ğŸ’</button>
    </div></div>`;
  if(step==="âš™ï¸")return `<div class=panel>
    <div class=links>
      <a class=lnk href="https://github.com/pewpi-infinity/${item.repo}" target=_blank>ğŸ§±</a>
      <a class=lnk href="${search('improve github pages '+topic)}" target=_blank>ğŸ›ï¸</a>
    </div></div>`;
  if(step==="ğŸ’°")return `<div class=panel>
    <div class=links>
      <a class=lnk href="${search(topic+' keywords')}" target=_blank>ğŸ’°</a>
      <a class=lnk href="${search(topic+' monetization')}" target=_blank>ğŸ¤‘</a>
    </div></div>`;
  if(step==="ğŸ’²")return `<div class=panel>
    <div class=links>
      <button class=lnk onclick='alert("ğŸ’ facets: '+vault.length+' | ğŸ§² pulled: '+pulled.length+'")'>ğŸ’²</button>
      <a class=lnk href="${search(topic+' assets checklist')}" target=_blank>ğŸ”¢</a>
    </div></div>`;
}

function pull(r,u){pulled.unshift({r,u,t:Date.now()});save();render();}
function facet(r,u){vault.unshift({r,u,t:Date.now()});save();render();}

function card(item){
  const key='tab_'+item.repo;
  const cur=localStorage.getItem(key)||"ğŸŸ¡";
  const steps=ladder.map(e=>`<div class="step ${e===cur?'active':''}" onclick="setTab('${item.repo}','${e}')">${e}</div>`).join('');
  const bar=emojis.map(e=>`<div class=e onclick="act('${e}','${item.repo}','${item.url}')">${e}</div>`).join('');
  return `<div class=card>
    <div class=hd>
      <div class=repo>ğŸ‘‘ ${item.repo}</div>
      <div class=url>${item.url}</div>
      <div class=bar>${bar}</div>
    </div>
    <div class=body>
      <div class=steps>${steps}</div>
      ${panel(cur,item)}
    </div>
  </div>`;
}

function act(e,r,u){
  const t=$("q").value||r;
  if(e==="ğŸ‘‘")return window.open(u);
  if(e==="ğŸ§±")return window.open('https://github.com/pewpi-infinity/'+r);
  if(e==="ğŸ•¹ï¸")return $("q").focus();
  if(e==="ğŸ§²")return pull(r,u);
  if(e==="ğŸ’")return facet(r,u);
  if(e==="ğŸ„"){window.open(search(t+' site:'+new URL(u).host));window.open(search(t+' github '+r));}
  if(e==="â­")return window.open(search(t+' trends'));
  if(e==="â˜„ï¸")return window.open(search(t+' nightly news movies entertainment'));
  if(e==="ğŸŒ")return window.open(search(t+' communities resources'));
  if(e==="âš¡")return window.open(search(u+' ui inspiration'));
  if(e==="ğŸ¤‘")return window.open(search(t+' press release'));
}

window.setTab=(r,e)=>{localStorage.setItem('tab_'+r,e);render();}

async function load(){
  const d=await (await fetch('data/crown_sites.json',{cache:'no-store'})).json();
  $("count").textContent='ğŸ‘‘ '+d.length;
  window.data=d;
  render();
}

function render(){
  const q=($("q").value||'').toLowerCase();
  $("grid").innerHTML=window.data
    .filter(x=>!q||x.repo.toLowerCase().includes(q)||x.url.toLowerCase().includes(q))
    .map(card).join('');
}

$("q").oninput=render;
load();
</script>
</body>
</html>
